import { Subject } from 'rxjs';
import { map, take } from 'rxjs/operators';
import { DataControl, dispatch } from '../../../core/global-classes';
import { ServiceLocator } from '../../../locator.service';
import { ToastNotificationConfigService } from './toast-notification-config.service';
import { ToastNotificationService } from './toast-notification.service';
// region *** Public ***
export class ToastNotificationInitializer {
    constructor() {
        this.toastNotificationCarrier = new ToastNotificationCarrier();
    }
    openToastNotification$() {
        return this.toastNotificationCarrier.openToastNotification$().pipe(map(resp => {
            const basicToastNotificationResponse = new ToastNotificationResponse();
            const dataControl = new DataControl();
            dataControl.copyValuesFrom(resp, basicToastNotificationResponse);
            return basicToastNotificationResponse;
        }), take(1));
    }
    setButtons(_Buttons) {
        this.toastNotificationCarrier.setButtons(_Buttons);
    }
    setConfig(_ToastNotificationConfig) {
        this.toastNotificationCarrier.setConfig(_ToastNotificationConfig);
    }
    setDispatch(_Title, _Message = null) {
        this.toastNotificationCarrier.setTitle(_Title);
        this.toastNotificationCarrier.setMessage(_Message);
    }
    setTitle(_Title) {
        this.toastNotificationCarrier.setTitle(_Title);
    }
    setMessage(_Message) {
        this.toastNotificationCarrier.setMessage(_Message);
    }
    setButtonLabels(_Confirm, _Decline) {
        this.toastNotificationCarrier.setButtonLabels(_Confirm, _Decline);
    }
}
export class ToastNotificationResponse extends DataControl {
    constructor() {
        super();
        // private Response: DialogPrepareResponse            = new DialogPrepareResponse();
        this.success = null;
        this.clickedButtonID = null;
    }
    setSuccess(_IsSuccess) {
        this.success = _IsSuccess;
    }
    setClickedButtonID(_ClickedButtonID) {
        this.clickedButtonID = _ClickedButtonID;
    }
}
export class ToastNotificationeventsController {
    constructor(entityUniqueID) {
        this.entityUniqueID = entityUniqueID;
        this._onButtonClick = new Subject();
        this._afterClosed = new Subject();
        this._buttonList = new Subject();
        this.afterClosed$ = this._afterClosed.asObservable();
        this.onButtonClick$ = this._onButtonClick.asObservable();
        this.buttonList$ = this._buttonList.asObservable();
    }
    close(_Response) {
        const response = _Response ? _Response : this.defaultResponse;
        this._afterClosed.next(response);
    }
    onButtonClick(_Button) {
        this.defaultResponse.setClickedButtonID(_Button.ID);
        this._onButtonClick.next(_Button);
    }
    setButtonList(_ButtonList) {
        this._buttonList.next(_ButtonList);
    }
    setDefaultResponse(_Response) {
        this.defaultResponse = _Response;
    }
}
// endregion
export class ToastNotificationDefaultResponse extends ToastNotificationResponse {
    constructor() {
        super();
        this.toastNotificationBelonging = null;
    }
    setBelonging(_ToastNotificationBelonging) {
        this.toastNotificationBelonging = _ToastNotificationBelonging;
    }
}
export class ToastNotificationCarrier {
    constructor() {
        this.toastNotificationBelonging = new ToastNotificationBelonging();
    }
    setButtons(_Buttons) {
        if (_Buttons.length) {
            this.toastNotificationBelonging.buttons = _Buttons;
        }
    }
    setTitle(_Title) {
        this.toastNotificationBelonging.dispatch.title = _Title;
    }
    setMessage(_Message) {
        this.toastNotificationBelonging.dispatch.message = _Message;
    }
    setButtonLabels(_Confirm, _Decline) {
        this.toastNotificationBelonging.toastCoreConfig.confirmLabel = _Confirm;
        this.toastNotificationBelonging.toastCoreConfig.declineLabel = _Decline;
    }
    setConfig(_ToastNotificationBelonging) {
        // region *** local UserConfig (defined on place where dialog is called) ***
        const dataControl = new DataControl();
        dataControl.copyValuesFrom(_ToastNotificationBelonging, this.toastNotificationBelonging.toastCoreConfig);
        // endregion
    }
    openToastNotification$() {
        if (!this.toastNotificationBelonging.dispatch.title && !this.toastNotificationBelonging.dispatch.message) {
            throw Error('Toast notification can not be without both message and title.');
        }
        const service = ServiceLocator.injector.get(ToastNotificationService);
        return service.openToast$(this.toastNotificationBelonging);
    }
}
export class GlobalToastSettings {
    constructor() {
        this.allowedNotificationsAtOnce = null;
    }
}
export class ResetToastGlobalSettings {
    constructor(globalToastConfig) {
        const globalToastConfigService = ServiceLocator.injector.get(ToastNotificationConfigService);
        if (globalToastConfigService) {
            globalToastConfigService.setResetGlobalToastConfig(globalToastConfig);
        }
        else {
            globalToastConfigService.setResetGlobalToastConfig();
        }
    }
}
export class ToastSettings {
    constructor() {
        this.buttons = [];
        this.toastCoreConfig = new toastCoreConfig();
        this.dispatch = new dispatch();
        this.globalSettings = new GlobalToastSettings();
    }
}
export class ToastCustomStyles {
    constructor() {
        this.titleCSS = null;
        this.textCSS = null;
        this.buttonSectionCSS = null;
        this.buttonCSS = null;
    }
}
export class toastCoreConfig {
    constructor() {
        this.toastPosition = null;
        this.progressBar = null;
        this.toastUserViewType = null;
        this.openInElementID = null;
        this.buttonPosition = null;
        this.textPosition = null;
        this.layoutType = null;
        this.dispatch = null;
        this.confirmLabel = null;
        this.declineLabel = null;
        this.autoCloseDelay = null;
        this.disableIcon = null;
        this.allowHtmlMessage = null;
        this.animationIn = null;
        this.animationOut = null;
        this.customStyles = new ToastCustomStyles();
        this.iconStyleClass = null;
    }
}
export class ToastNotificationBelonging extends ToastSettings {
    constructor() {
        super();
        this.entityUniqueID = 'T' + Math.random().toString(36).substr(2, 9);
        this.eventsController = new ToastNotificationeventsController(this.entityUniqueID);
        const toastNotificationConfigurator = ServiceLocator.injector.get(ToastNotificationConfigService);
        const baseSettings = new ToastSettings();
        const dataControl = new DataControl();
        dataControl.copyValuesFrom(toastNotificationConfigurator.productionConfig.toastCoreConfig, baseSettings.toastCoreConfig);
        this.toastCoreConfig = baseSettings.toastCoreConfig;
        this.buttons = toastNotificationConfigurator.productionConfig.buttons.slice();
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xhc3Nlcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL25neC1hd2Vzb21lLXBvcHVwL3R5cGVzL3RvYXN0LW5vdGlmaWNhdGlvbi9jb3JlL2NsYXNzZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFjLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMzQyxPQUFPLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBTzNDLE9BQU8sRUFBRSxXQUFXLEVBQUUsUUFBUSxFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFFckUsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBVzFELE9BQU8sRUFBRSw4QkFBOEIsRUFBRSxNQUFNLHFDQUFxQyxDQUFDO0FBQ3JGLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBRXhFLHdCQUF3QjtBQUN4QixNQUFNLE9BQU8sNEJBQTRCO0lBR3ZDO1FBRlEsNkJBQXdCLEdBQTZCLElBQUksd0JBQXdCLEVBQUUsQ0FBQztJQUU3RSxDQUFDO0lBRWhCLHNCQUFzQjtRQUNwQixPQUFPLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxzQkFBc0IsRUFBRSxDQUFDLElBQUksQ0FDaEUsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQ1QsTUFBTSw4QkFBOEIsR0FBRyxJQUFJLHlCQUF5QixFQUFFLENBQUM7WUFDdkUsTUFBTSxXQUFXLEdBQUcsSUFBSSxXQUFXLEVBQUUsQ0FBQztZQUN0QyxXQUFXLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSw4QkFBOEIsQ0FBQyxDQUFDO1lBQ2pFLE9BQU8sOEJBQThCLENBQUM7UUFDeEMsQ0FBQyxDQUFDLEVBQ0YsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUNSLENBQUM7SUFDSixDQUFDO0lBRUQsVUFBVSxDQUFDLFFBQW1CO1FBQzVCLElBQUksQ0FBQyx3QkFBd0Is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QixDQUFDO1FBQ0YsSUFBSSxDQUFDLGVBQWUsR0FBRyxZQUFZLENBQUMsZUFBZSxDQUFDO1FBQ3BELElBQUksQ0FBQyxPQUFPLEdBQUcsNkJBQTZCLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ2hGLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9ic2VydmFibGUsIFN1YmplY3QgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IG1hcCwgdGFrZSB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7XG4gIEFwcGVhcmFuY2VBbmltYXRpb24sXG4gIERpYWxvZ0xheW91dERpc3BsYXksXG4gIERpc2FwcGVhcmFuY2VBbmltYXRpb24sXG4gIFZlcnRpY2FsUG9zaXRpb25cbn0gZnJvbSAnLi4vLi4vLi4vY29yZS9lbnVtcyc7XG5pbXBvcnQgeyBEYXRhQ29udHJvbCwgZGlzcGF0Y2ggfSBmcm9tICcuLi8uLi8uLi9jb3JlL2dsb2JhbC1jbGFzc2VzJztcbmltcG9ydCB7IElCdXR0b24sIElEaXNwYXRjaCB9IGZyb20gJy4uLy4uLy4uL2NvcmUvZ2xvYmFsLWludGVyZmFjZXMnO1xuaW1wb3J0IHsgU2VydmljZUxvY2F0b3IgfSBmcm9tICcuLi8uLi8uLi9sb2NhdG9yLnNlcnZpY2UnO1xuaW1wb3J0IHsgVG9hc3RQb3NpdGlvbkVudW0sIFRvYXN0UHJvZ3Jlc3NCYXJFbnVtLCBUb2FzdFVzZXJWaWV3VHlwZUVudW0gfSBmcm9tICcuL2VudW1zJztcbmltcG9ydCB7XG4gIElHbG9iYWxUb2FzdFNldHRpbmdzLFxuICBJUHJpdmF0ZVJlc3BvbnNlTWVyZ2VkLFxuICBJVG9hc3RDb3JlQ29uZmlnLFxuICBJVG9hc3RDdXN0b21TdHlsZXMsXG4gIElUb2FzdE5vdGlmaWNhdGlvbkJlbG9uZ2luZyxcbiAgSVRvYXN0Tm90aWZpY2F0aW9uUHVibGljUmVzcG9uc2UsXG4gIElUb2FzdE5vdGlmaWNhdGlvblJlc3BvbnNlXG59IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBUb2FzdE5vdGlmaWNhdGlvbkNvbmZpZ1NlcnZpY2UgfSBmcm9tICcuL3RvYXN0LW5vdGlmaWNhdGlvbi1jb25maWcuc2VydmljZSc7XG5pbXBvcnQgeyBUb2FzdE5vdGlmaWNhdGlvblNlcnZpY2UgfSBmcm9tICcuL3RvYXN0LW5vdGlmaWNhdGlvbi5zZXJ2aWNlJztcblxuLy8gcmVnaW9uICoqKiBQdWJsaWMgKioqXG5leHBvcnQgY2xhc3MgVG9hc3ROb3RpZmljYXRpb25Jbml0aWFsaXplciB7XG4gIHByaXZhdGUgdG9hc3ROb3RpZmljYXRpb25DYXJyaWVyOiBUb2FzdE5vdGlmaWNhdGlvbkNhcnJpZXIgPSBuZXcgVG9hc3ROb3RpZmljYXRpb25DYXJyaWVyKCk7XG5cbiAgY29uc3RydWN0b3IoKSB7fVxuXG4gIG9wZW5Ub2FzdE5vdGlmaWNhdGlvbiQoKTogT2JzZXJ2YWJsZTxJVG9hc3ROb3RpZmljYXRpb25QdWJsaWNSZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLnRvYXN0Tm90aWZpY2F0aW9uQ2Fycmllci5vcGVuVG9hc3ROb3RpZmljYXRpb24kKCkucGlwZShcbiAgICAgIG1hcChyZXNwID0+IHtcbiAgICAgICAgY29uc3QgYmFzaWNUb2FzdE5vdGlmaWNhdGlvblJlc3BvbnNlID0gbmV3IFRvYXN0Tm90aWZpY2F0aW9uUmVzcG9uc2UoKTtcbiAgICAgICAgY29uc3QgZGF0YUNvbnRyb2wgPSBuZXcgRGF0YUNvbnRyb2woKTtcbiAgICAgICAgZGF0YUNvbnRyb2wuY29weVZhbHVlc0Zyb20ocmVzcCwgYmFzaWNUb2FzdE5vdGlmaWNhdGlvblJlc3BvbnNlKTtcbiAgICAgICAgcmV0dXJuIGJhc2ljVG9hc3ROb3RpZmljYXRpb25SZXNwb25zZTtcbiAgICAgIH0pLFxuICAgICAgdGFrZSgxKVxuICAgICk7XG4gIH1cblxuICBzZXRCdXR0b25zKF9CdXR0b25zOiBJQnV0dG9uW10pOiB2b2lkIHtcbiAgICB0aGlzLnRvYXN0Tm90aWZpY2F0aW9uQ2Fycmllci5zZXRCdXR0b25zKF9CdXR0b25zKTtcbiAgfVxuXG4gIHNldENvbmZpZyhfVG9hc3ROb3RpZmljYXRpb25Db25maWc6IElUb2FzdENvcmVDb25maWcpOiB2b2lkIHtcbiAgICB0aGlzLnRvYXN0Tm90aWZpY2F0aW9uQ2Fycmllci5zZXRDb25maWcoX1RvYXN0Tm90aWZpY2F0aW9uQ29uZmlnKTtcbiAgfVxuXG4gIHNldERpc3BhdGNoKF9UaXRsZTogc3RyaW5nLCBfTWVzc2FnZTogc3RyaW5nID0gbnVsbCk6IHZvaWQge1xuICAgIHRoaXMudG9hc3ROb3RpZmljYXRpb25DYXJyaWVyLnNldFRpdGxlKF9UaXRsZSk7XG4gICAgdGhpcy50b2FzdE5vdGlmaWNhdGlvbkNhcnJpZXIuc2V0TWVzc2FnZShfTWVzc2FnZSk7XG4gIH1cblxuICBzZXRUaXRsZShfVGl0bGU6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMudG9hc3ROb3RpZmljYXRpb25DYXJyaWVyLnNldFRpdGxlKF9UaXRsZSk7XG4gIH1cblxuICBzZXRNZXNzYWdlKF9NZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLnRvYXN0Tm90aWZpY2F0aW9uQ2Fycmllci5zZXRNZXNzYWdlKF9NZXNzYWdlKTtcbiAgfVxuXG4gIHNldEJ1dHRvbkxhYmVscyhfQ29uZmlybTogc3RyaW5nLCBfRGVjbGluZT86IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMudG9hc3ROb3RpZmljYXRpb25DYXJyaWVyLnNldEJ1dHRvbkxhYmVscyhfQ29uZmlybSwgX0RlY2xpbmUpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUb2FzdE5vdGlmaWNhdGlvblJlc3BvbnNlXG4gIGV4dGVuZHMgRGF0YUNvbnRyb2xcbiAgaW1wbGVtZW50cyBJVG9hc3ROb3RpZmljYXRpb25SZXNwb25zZSwgSVRvYXN0Tm90aWZpY2F0aW9uUHVibGljUmVzcG9uc2VcbntcbiAgLy8gcHJpdmF0ZSBSZXNwb25zZTogRGlhbG9nUHJlcGFyZVJlc3BvbnNlICAgICAgICAgICAgPSBuZXcgRGlhbG9nUHJlcGFyZVJlc3BvbnNlKCk7XG5cbiAgc3VjY2VzczogYm9vbGVhbiA9IG51bGw7XG4gIGNsaWNrZWRCdXR0b25JRDogc3RyaW5nID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgc2V0U3VjY2VzcyhfSXNTdWNjZXNzOiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5zdWNjZXNzID0gX0lzU3VjY2VzcztcbiAgfVxuXG4gIHNldENsaWNrZWRCdXR0b25JRChfQ2xpY2tlZEJ1dHRvbklEKTogdm9pZCB7XG4gICAgdGhpcy5jbGlja2VkQnV0dG9uSUQgPSBfQ2xpY2tlZEJ1dHRvbklEO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUb2FzdE5vdGlmaWNhdGlvbmV2ZW50c0NvbnRyb2xsZXIge1xuICBwcml2YXRlIHJlYWRvbmx5IF9vbkJ1dHRvbkNsaWNrOiBTdWJqZWN0PElCdXR0b24+ID0gbmV3IFN1YmplY3Q8SUJ1dHRvbj4oKTtcbiAgcHJpdmF0ZSByZWFkb25seSBfYWZ0ZXJDbG9zZWQ6IFN1YmplY3Q8SVByaXZhdGVSZXNwb25zZU1lcmdlZD4gPSBuZXcgU3ViamVjdDxJUHJpdmF0ZVJlc3BvbnNlTWVyZ2VkPigpO1xuICBwcml2YXRlIHJlYWRvbmx5IF9idXR0b25MaXN0OiBTdWJqZWN0PElCdXR0b25bXT4gPSBuZXcgU3ViamVjdDxJQnV0dG9uW10+KCk7XG4gIGRlZmF1bHRSZXNwb25zZTogSVByaXZhdGVSZXNwb25zZU1lcmdlZDtcbiAgYWZ0ZXJDbG9zZWQkOiBPYnNlcnZhYmxlPElQcml2YXRlUmVzcG9uc2VNZXJnZWQ+ID0gdGhpcy5fYWZ0ZXJDbG9zZWQuYXNPYnNlcnZhYmxlKCk7XG4gIG9uQnV0dG9uQ2xpY2skOiBPYnNlcnZhYmxlPElCdXR0b24+ID0gdGhpcy5fb25CdXR0b25DbGljay5hc09ic2VydmFibGUoKTtcbiAgYnV0dG9uTGlzdCQ6IE9ic2VydmFibGU8SUJ1dHRvbltdPiA9IHRoaXMuX2J1dHRvbkxpc3QuYXNPYnNlcnZhYmxlKCk7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBlbnRpdHlVbmlxdWVJRDogc3RyaW5nKSB7fVxuXG4gIGNsb3NlKF9SZXNwb25zZT86IElQcml2YXRlUmVzcG9uc2VNZXJnZWQpOiB2b2lkIHtcbiAgICBjb25zdCByZXNwb25zZSA9IF9SZXNwb25zZSA/IF9SZXNwb25zZSA6IHRoaXMuZGVmYXVsdFJlc3BvbnNlO1xuICAgIHRoaXMuX2FmdGVyQ2xvc2VkLm5leHQocmVzcG9uc2UpO1xuICB9XG5cbiAgb25CdXR0b25DbGljayhfQnV0dG9uOiBJQnV0dG9uKTogdm9pZCB7XG4gICAgdGhpcy5kZWZhdWx0UmVzcG9uc2Uuc2V0Q2xpY2tlZEJ1dHRvbklEKF9CdXR0b24uSUQpO1xuICAgIHRoaXMuX29uQnV0dG9uQ2xpY2submV4dChfQnV0dG9uKTtcbiAgfVxuXG4gIHNldEJ1dHRvbkxpc3QoX0J1dHRvbkxpc3Q6IElCdXR0b25bXSk6IHZvaWQge1xuICAgIHRoaXMuX2J1dHRvbkxpc3QubmV4dChfQnV0dG9uTGlzdCk7XG4gIH1cblxuICBzZXREZWZhdWx0UmVzcG9uc2UoX1Jlc3BvbnNlOiBJUHJpdmF0ZVJlc3BvbnNlTWVyZ2VkKTogdm9pZCB7XG4gICAgdGhpcy5kZWZhdWx0UmVzcG9uc2UgPSBfUmVzcG9uc2U7XG4gIH1cbn1cblxuLy8gZW5kcmVnaW9uXG5cbmV4cG9ydCBjbGFzcyBUb2FzdE5vdGlmaWNhdGlvbkRlZmF1bHRSZXNwb25zZSBleHRlbmRzIFRvYXN0Tm90aWZpY2F0aW9uUmVzcG9uc2UgaW1wbGVtZW50cyBJUHJpdmF0ZVJlc3BvbnNlTWVyZ2VkIHtcbiAgdG9hc3ROb3RpZmljYXRpb25CZWxvbmdpbmc6IFRvYXN0Tm90aWZpY2F0aW9uQmVsb25naW5nID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgc2V0QmVsb25naW5nKF9Ub2FzdE5vdGlmaWNhdGlvbkJlbG9uZ2luZyk6IHZvaWQge1xuICAgIHRoaXMudG9hc3ROb3RpZmljYXRpb25CZWxvbmdpbmcgPSBfVG9hc3ROb3RpZmljYXRpb25CZWxvbmdpbmc7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFRvYXN0Tm90aWZpY2F0aW9uQ2FycmllciB7XG4gIHRvYXN0Tm90aWZpY2F0aW9uQmVsb25naW5nOiBUb2FzdE5vdGlmaWNhdGlvbkJlbG9uZ2luZyA9IG5ldyBUb2FzdE5vdGlmaWNhdGlvbkJlbG9uZ2luZygpO1xuXG4gIGNvbnN0cnVjdG9yKCkge31cblxuICBzZXRCdXR0b25zKF9CdXR0b25zOiBJQnV0dG9uW10pOiB2b2lkIHtcbiAgICBpZiAoX0J1dHRvbnMubGVuZ3RoKSB7XG4gICAgICB0aGlzLnRvYXN0Tm90aWZpY2F0aW9uQmVsb25naW5nLmJ1dHRvbnMgPSBfQnV0dG9ucztcbiAgICB9XG4gIH1cblxuICBzZXRUaXRsZShfVGl0bGU6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMudG9hc3ROb3RpZmljYXRpb25CZWxvbmdpbmcuZGlzcGF0Y2gudGl0bGUgPSBfVGl0bGU7XG4gIH1cblxuICBzZXRNZXNzYWdlKF9NZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLnRvYXN0Tm90aWZpY2F0aW9uQmVsb25naW5nLmRpc3BhdGNoLm1lc3NhZ2UgPSBfTWVzc2FnZTtcbiAgfVxuXG4gIHNldEJ1dHRvbkxhYmVscyhfQ29uZmlybTogc3RyaW5nLCBfRGVjbGluZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy50b2FzdE5vdGlmaWNhdGlvbkJlbG9uZ2luZy50b2FzdENvcmVDb25maWcuY29uZmlybUxhYmVsID0gX0NvbmZpcm07XG4gICAgdGhpcy50b2FzdE5vdGlmaWNhdGlvbkJlbG9uZ2luZy50b2FzdENvcmVDb25maWcuZGVjbGluZUxhYmVsID0gX0RlY2xpbmU7XG4gIH1cblxuICBzZXRDb25maWcoX1RvYXN0Tm90aWZpY2F0aW9uQmVsb25naW5nOiBJVG9hc3RDb3JlQ29uZmlnKTogdm9pZCB7XG4gICAgLy8gcmVnaW9uICoqKiBsb2NhbCBVc2VyQ29uZmlnIChkZWZpbmVkIG9uIHBsYWNlIHdoZXJlIGRpYWxvZyBpcyBjYWxsZWQpICoqKlxuICAgIGNvbnN0IGRhdGFDb250cm9sID0gbmV3IERhdGFDb250cm9sKCk7XG4gICAgZGF0YUNvbnRyb2wuY29weVZhbHVlc0Zyb20oX1RvYXN0Tm90aWZpY2F0aW9uQmVsb25naW5nLCB0aGlzLnRvYXN0Tm90aWZpY2F0aW9uQmVsb25naW5nLnRvYXN0Q29yZUNvbmZpZyk7XG4gICAgLy8gZW5kcmVnaW9uXG4gIH1cblxuICBvcGVuVG9hc3ROb3RpZmljYXRpb24kKCk6IE9ic2VydmFibGU8SVByaXZhdGVSZXNwb25zZU1lcmdlZD4ge1xuICAgIGlmICghdGhpcy50b2FzdE5vdGlmaWNhdGlvbkJlbG9uZ2luZy5kaXNwYXRjaC50aXRsZSAmJiAhdGhpcy50b2FzdE5vdGlmaWNhdGlvbkJlbG9uZ2luZy5kaXNwYXRjaC5tZXNzYWdlKSB7XG4gICAgICB0aHJvdyBFcnJvcignVG9hc3Qgbm90aWZpY2F0aW9uIGNhbiBub3QgYmUgd2l0aG91dCBib3RoIG1lc3NhZ2UgYW5kIHRpdGxlLicpO1xuICAgIH1cbiAgICBjb25zdCBzZXJ2aWNlOiBUb2FzdE5vdGlmaWNhdGlvblNlcnZpY2UgPSBTZXJ2aWNlTG9jYXRvci5pbmplY3Rvci5nZXQoVG9hc3ROb3RpZmljYXRpb25TZXJ2aWNlKTtcbiAgICByZXR1cm4gc2VydmljZS5vcGVuVG9hc3QkKHRoaXMudG9hc3ROb3RpZmljYXRpb25CZWxvbmdpbmcpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBHbG9iYWxUb2FzdFNldHRpbmdzIGltcGxlbWVudHMgSUdsb2JhbFRvYXN0U2V0dGluZ3Mge1xuICBhbGxvd2VkTm90aWZpY2F0aW9uc0F0T25jZTogbnVtYmVyID0gbnVsbDtcbn1cblxuZXhwb3J0IGNsYXNzIFJlc2V0VG9hc3RHbG9iYWxTZXR0aW5ncyB7XG4gIGNvbnN0cnVjdG9yKGdsb2JhbFRvYXN0Q29uZmlnPzogSUdsb2JhbFRvYXN0U2V0dGluZ3MpIHtcbiAgICBjb25zdCBnbG9iYWxUb2FzdENvbmZpZ1NlcnZpY2U6IFRvYXN0Tm90aWZpY2F0aW9uQ29uZmlnU2VydmljZSA9XG4gICAgICBTZXJ2aWNlTG9jYXRvci5pbmplY3Rvci5nZXQoVG9hc3ROb3RpZmljYXRpb25Db25maWdTZXJ2aWNlKTtcbiAgICBpZiAoZ2xvYmFsVG9hc3RDb25maWdTZXJ2aWNlKSB7XG4gICAgICBnbG9iYWxUb2FzdENvbmZpZ1NlcnZpY2Uuc2V0UmVzZXRHbG9iYWxUb2FzdENvbmZpZyhnbG9iYWxUb2FzdENvbmZpZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdsb2JhbFRvYXN0Q29uZmlnU2VydmljZS5zZXRSZXNldEdsb2JhbFRvYXN0Q29uZmlnKCk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUb2FzdFNldHRpbmdzIHtcbiAgYnV0dG9uczogSUJ1dHRvbltdID0gW107XG4gIHRvYXN0Q29yZUNvbmZpZzogSVRvYXN0Q29yZUNvbmZpZyA9IG5ldyB0b2FzdENvcmVDb25maWcoKTtcbiAgZGlzcGF0Y2g6IElEaXNwYXRjaCA9IG5ldyBkaXNwYXRjaCgpO1xuICBnbG9iYWxTZXR0aW5nczogR2xvYmFsVG9hc3RTZXR0aW5ncyA9IG5ldyBHbG9iYWxUb2FzdFNldHRpbmdzKCk7XG59XG5cbmV4cG9ydCBjbGFzcyBUb2FzdEN1c3RvbVN0eWxlcyBpbXBsZW1lbnRzIElUb2FzdEN1c3RvbVN0eWxlcyB7XG4gIHRpdGxlQ1NTOiBzdHJpbmcgPSBudWxsO1xuICB0ZXh0Q1NTOiBzdHJpbmcgPSBudWxsO1xuICBidXR0b25TZWN0aW9uQ1NTOiBzdHJpbmcgPSBudWxsO1xuICBidXR0b25DU1M6IHN0cmluZyA9IG51bGw7XG59XG5cbmV4cG9ydCBjbGFzcyB0b2FzdENvcmVDb25maWcgaW1wbGVtZW50cyBJVG9hc3RDb3JlQ29uZmlnIHtcbiAgdG9hc3RQb3NpdGlvbjogVG9hc3RQb3NpdGlvbkVudW0gPSBudWxsO1xuICBwcm9ncmVzc0JhcjogVG9hc3RQcm9ncmVzc0JhckVudW0gPSBudWxsO1xuICB0b2FzdFVzZXJWaWV3VHlwZTogVG9hc3RVc2VyVmlld1R5cGVFbnVtID0gbnVsbDtcbiAgb3BlbkluRWxlbWVudElEOiBzdHJpbmcgPSBudWxsO1xuICBidXR0b25Qb3NpdGlvbjogVmVydGljYWxQb3NpdGlvbiA9IG51bGw7XG4gIHRleHRQb3NpdGlvbjogVmVydGljYWxQb3NpdGlvbiA9IG51bGw7XG4gIGxheW91dFR5cGU6IERpYWxvZ0xheW91dERpc3BsYXkgPSBudWxsO1xuICBkaXNwYXRjaDogSURpc3BhdGNoID0gbnVsbDtcbiAgY29uZmlybUxhYmVsOiBzdHJpbmcgPSBudWxsO1xuICBkZWNsaW5lTGFiZWw6IHN0cmluZyA9IG51bGw7XG4gIGF1dG9DbG9zZURlbGF5OiBudW1iZXIgPSBudWxsO1xuICBkaXNhYmxlSWNvbjogYm9vbGVhbiA9IG51bGw7XG4gIGFsbG93SHRtbE1lc3NhZ2U6IGJvb2xlYW4gPSBudWxsO1xuICBhbmltYXRpb25JbjogQXBwZWFyYW5jZUFuaW1hdGlvbiA9IG51bGw7XG4gIGFuaW1hdGlvbk91dDogRGlzYXBwZWFyYW5jZUFuaW1hdGlvbiA9IG51bGw7XG4gIGN1c3RvbVN0eWxlczogSVRvYXN0Q3VzdG9tU3R5bGVzID0gbmV3IFRvYXN0Q3VzdG9tU3R5bGVzKCk7XG4gIGljb25TdHlsZUNsYXNzOiBzdHJpbmcgPSBudWxsO1xufVxuXG5leHBvcnQgY2xhc3MgVG9hc3ROb3RpZmljYXRpb25CZWxvbmdpbmcgZXh0ZW5kcyBUb2FzdFNldHRpbmdzIGltcGxlbWVudHMgSVRvYXN0Tm90aWZpY2F0aW9uQmVsb25naW5nIHtcbiAgZW50aXR5VW5pcXVlSUQ6IHN0cmluZyA9ICdUJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KTtcbiAgZXZlbnRzQ29udHJvbGxlcjogVG9hc3ROb3RpZmljYXRpb25ldmVudHNDb250cm9sbGVyO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5ldmVudHNDb250cm9sbGVyID0gbmV3IFRvYXN0Tm90aWZpY2F0aW9uZXZlbnRzQ29udHJvbGxlcih0aGlzLmVudGl0eVVuaXF1ZUlEKTtcbiAgICBjb25zdCB0b2FzdE5vdGlmaWNhdGlvbkNvbmZpZ3VyYXRvcjogVG9hc3ROb3RpZmljYXRpb25Db25maWdTZXJ2aWNlID1cbiAgICAgIFNlcnZpY2VMb2NhdG9yLmluamVjdG9yLmdldChUb2FzdE5vdGlmaWNhdGlvbkNvbmZpZ1NlcnZpY2UpO1xuICAgIGNvbnN0IGJhc2VTZXR0aW5ncyA9IG5ldyBUb2FzdFNldHRpbmdzKCk7XG4gICAgY29uc3QgZGF0YUNvbnRyb2wgPSBuZXcgRGF0YUNvbnRyb2woKTtcbiAgICBkYXRhQ29udHJvbC5jb3B5VmFsdWVzRnJvbShcbiAgICAgIHRvYXN0Tm90aWZpY2F0aW9uQ29uZmlndXJhdG9yLnByb2R1Y3Rpb25Db25maWcudG9hc3RDb3JlQ29uZmlnLFxuICAgICAgYmFzZVNldHRpbmdzLnRvYXN0Q29yZUNvbmZpZ1xuICAgICk7XG4gICAgdGhpcy50b2FzdENvcmVDb25maWcgPSBiYXNlU2V0dGluZ3MudG9hc3RDb3JlQ29uZmlnO1xuICAgIHRoaXMuYnV0dG9ucyA9IHRvYXN0Tm90aWZpY2F0aW9uQ29uZmlndXJhdG9yLnByb2R1Y3Rpb25Db25maWcuYnV0dG9ucy5zbGljZSgpO1xuICB9XG59XG4iXX0=
import { Subject } from 'rxjs';
import { map, take } from 'rxjs/operators';
import { DataControl, Dispatch } from '../../../core/global-classes';
import { ServiceLocator } from '../../../locator.service';
import { ToastNotificationConfigService } from './toast-notification-config.service';
import { ToastNotificationService } from './toast-notification.service';
// region *** Public ***
export class ToastNotificationInitializer {
    constructor() {
        this.toastNotificationCarrier = new ToastNotificationCarrier();
    }
    openToastNotification$() {
        return this.toastNotificationCarrier.openToastNotification$().pipe(map(resp => {
            const basicToastNotificationResponse = new ToastNotificationResponse();
            const dataControl = new DataControl();
            dataControl.copyValuesFrom(resp, basicToastNotificationResponse);
            return basicToastNotificationResponse;
        }), take(1));
    }
    setButtons(_Buttons) {
        this.toastNotificationCarrier.setButtons(_Buttons);
    }
    setConfig(_ToastNotificationConfig) {
        this.toastNotificationCarrier.setConfig(_ToastNotificationConfig);
    }
    setDispatch(_Title, _Message = null) {
        this.toastNotificationCarrier.setTitle(_Title);
        this.toastNotificationCarrier.setMessage(_Message);
    }
    setTitle(_Title) {
        this.toastNotificationCarrier.setTitle(_Title);
    }
    setMessage(_Message) {
        this.toastNotificationCarrier.setMessage(_Message);
    }
    setButtonLabels(_Confirm, _Decline) {
        this.toastNotificationCarrier.setButtonLabels(_Confirm, _Decline);
    }
}
export class ToastNotificationResponse extends DataControl {
    constructor() {
        super();
        // private Response: DialogPrepareResponse            = new DialogPrepareResponse();
        this.Success = null;
        this.ClickedButtonID = null;
    }
    setSuccess(_IsSuccess) {
        this.Success = _IsSuccess;
    }
    setClickedButtonID(_ClickedButtonID) {
        this.ClickedButtonID = _ClickedButtonID;
    }
}
export class ToastNotificationEventsController {
    constructor(EntityUniqueID) {
        this.EntityUniqueID = EntityUniqueID;
        this._afterClosed = new Subject();
        this.afterClosed$ = this._afterClosed.asObservable();
        this._onButtonClick = new Subject();
        this.onButtonClick$ = this._onButtonClick.asObservable();
        this._buttonList = new Subject();
        this.buttonList$ = this._buttonList.asObservable();
    }
    close(_Response) {
        const response = _Response ? _Response : this.defaultResponse;
        this._afterClosed.next(response);
    }
    onButtonClick(_Button) {
        this.defaultResponse.setClickedButtonID(_Button.ID);
        this._onButtonClick.next(_Button);
    }
    setButtonList(_ButtonList) {
        this._buttonList.next(_ButtonList);
    }
    setDefaultResponse(_Response) {
        this.defaultResponse = _Response;
    }
}
// endregion
export class ToastNotificationDefaultResponse extends ToastNotificationResponse {
    constructor() {
        super();
        this.toastNotificationBelonging = null;
    }
    setBelonging(_ToastNotificationBelonging) {
        this.toastNotificationBelonging = _ToastNotificationBelonging;
    }
}
export class ToastNotificationCarrier {
    constructor() {
        this.toastNotificationBelonging = new ToastNotificationBelonging();
    }
    setButtons(_Buttons) {
        if (_Buttons.length) {
            this.toastNotificationBelonging.Buttons = _Buttons;
        }
    }
    setTitle(_Title) {
        this.toastNotificationBelonging.Dispatch.Title = _Title;
    }
    setMessage(_Message) {
        this.toastNotificationBelonging.Dispatch.Message = _Message;
    }
    setButtonLabels(_Confirm, _Decline) {
        this.toastNotificationBelonging.ToastCoreConfig.ConfirmLabel = _Confirm;
        this.toastNotificationBelonging.ToastCoreConfig.DeclineLabel = _Decline;
    }
    setConfig(_ToastNotificationBelonging) {
        // region *** local UserConfig (defined on place where dialog is called) ***
        const dataControl = new DataControl();
        dataControl.copyValuesFrom(_ToastNotificationBelonging, this.toastNotificationBelonging.ToastCoreConfig);
        // endregion
    }
    openToastNotification$() {
        if (!this.toastNotificationBelonging.Dispatch.Title && !this.toastNotificationBelonging.Dispatch.Message) {
            throw Error('Toast notification can not be without both message and title.');
        }
        const service = ServiceLocator.injector.get(ToastNotificationService);
        return service.openToast$(this.toastNotificationBelonging);
    }
}
export class GlobalToastSettings {
    constructor() {
        this.AllowedNotificationsAtOnce = null;
    }
}
export class ResetToastGlobalSettings {
    constructor(globalToastConfig) {
        const globalToastConfigService = ServiceLocator.injector.get(ToastNotificationConfigService);
        if (globalToastConfigService) {
            globalToastConfigService.setResetGlobalToastConfig(globalToastConfig);
        }
        else {
            globalToastConfigService.setResetGlobalToastConfig();
        }
    }
}
export class ToastSettings {
    constructor() {
        this.Buttons = [];
        this.ToastCoreConfig = new ToastCoreConfig();
        this.Dispatch = new Dispatch();
        this.GlobalSettings = new GlobalToastSettings();
    }
}
export class ToastCustomStyles {
    constructor() {
        this.TitleCSS = null;
        this.TextCSS = null;
        this.ButtonSectionCSS = null;
        this.ButtonCSS = null;
    }
}
export class ToastCoreConfig {
    constructor() {
        this.ToastPosition = null;
        this.ProgressBar = null;
        this.ToastUserViewType = null;
        this.OpenInElementID = null;
        this.ButtonPosition = null;
        this.TextPosition = null;
        this.LayoutType = null;
        this.Dispatch = null;
        this.ConfirmLabel = null;
        this.DeclineLabel = null;
        this.AutoCloseDelay = null;
        this.DisableIcon = null;
        this.AllowHTMLMessage = null;
        this.AnimationIn = null;
        this.AnimationOut = null;
        this.CustomStyles = new ToastCustomStyles();
    }
}
export class ToastNotificationBelonging extends ToastSettings {
    constructor() {
        super();
        this.EntityUniqueID = 'T' + Math.random().toString(36).substr(2, 9);
        this.EventsController = new ToastNotificationEventsController(this.EntityUniqueID);
        const toastNotificationConfigurator = ServiceLocator.injector.get(ToastNotificationConfigService);
        const baseSettings = new ToastSettings();
        const dataControl = new DataControl();
        dataControl.copyValuesFrom(toastNotificationConfigurator.productionConfig.ToastCoreConfig, baseSettings.ToastCoreConfig);
        this.ToastCoreConfig = baseSettings.ToastCoreConfig;
        this.Buttons = toastNotificationConfigurator.productionConfig.Buttons.slice();
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xhc3Nlcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL25neC1hd2Vzb21lLXBvcHVwL3R5cGVzL3RvYXN0LW5vdGlmaWNhdGlvbi9jb3JlL2NsYXNzZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFjLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMzQyxPQUFPLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBTzNDLE9BQU8sRUFBRSxXQUFXLEVBQUUsUUFBUSxFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFFckUsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBVzFELE9BQU8sRUFBRSw4QkFBOEIsRUFBRSxNQUFNLHFDQUFxQyxDQUFDO0FBQ3JGLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBRXhFLHdCQUF3QjtBQUN4QixNQUFNLE9BQU8sNEJBQTRCO0lBR3ZDO1FBRlEsNkJBQXdCLEdBQTZCLElBQUksd0JBQXdCLEVBQUUsQ0FBQztJQUU3RSxDQUFDO0lBRWhCLHNCQUFzQjtRQUNwQixPQUFPLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxzQkFBc0IsRUFBRSxDQUFDLElBQUksQ0FDaEUsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQ1QsTUFBTSw4QkFBOEIsR0FBRyxJQUFJLHlCQUF5QixFQUFFLENBQUM7WUFDdkUsTUFBTSxXQUFXLEdBQUcsSUFBSSxXQUFXLEVBQUUsQ0FBQztZQUN0QyxXQUFXLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSw4QkFBOEIsQ0FBQyxDQUFDO1lBQ2pFLE9BQU8sOEJBQThCLENBQUM7UUFDeEMsQ0FBQyxDQUFDLEVBQ0YsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUNSLENBQUM7SUFDSixDQUFDO0lBRUQsVUFBVSxDQUFDLFFBQW1CO1FBQzVCLElBQUksQ0FBQyx3QkFBd0Is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ZSxHQUFHLFlBQVksQ0FBQyxlQUFlLENBQUM7UUFDcEQsSUFBSSxDQUFDLE9BQU8sR0FBRyw2QkFBNkIsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDaEYsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgbWFwLCB0YWtlIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHtcbiAgQXBwZWFyYW5jZUFuaW1hdGlvbixcbiAgRGlhbG9nTGF5b3V0RGlzcGxheSxcbiAgRGlzYXBwZWFyYW5jZUFuaW1hdGlvbixcbiAgVmVydGljYWxQb3NpdGlvblxufSBmcm9tICcuLi8uLi8uLi9jb3JlL2VudW1zJztcbmltcG9ydCB7IERhdGFDb250cm9sLCBEaXNwYXRjaCB9IGZyb20gJy4uLy4uLy4uL2NvcmUvZ2xvYmFsLWNsYXNzZXMnO1xuaW1wb3J0IHsgSUJ1dHRvbiwgSURpc3BhdGNoIH0gZnJvbSAnLi4vLi4vLi4vY29yZS9nbG9iYWwtaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBTZXJ2aWNlTG9jYXRvciB9IGZyb20gJy4uLy4uLy4uL2xvY2F0b3Iuc2VydmljZSc7XG5pbXBvcnQgeyBUb2FzdFBvc2l0aW9uRW51bSwgVG9hc3RQcm9ncmVzc0JhckVudW0sIFRvYXN0VXNlclZpZXdUeXBlRW51bSB9IGZyb20gJy4vZW51bXMnO1xuaW1wb3J0IHtcbiAgSUdsb2JhbFRvYXN0U2V0dGluZ3MsXG4gIElQcml2YXRlUmVzcG9uc2VNZXJnZWQsXG4gIElUb2FzdENvcmVDb25maWcsXG4gIElUb2FzdEN1c3RvbVN0eWxlcyxcbiAgSVRvYXN0Tm90aWZpY2F0aW9uQmVsb25naW5nLFxuICBJVG9hc3ROb3RpZmljYXRpb25QdWJsaWNSZXNwb25zZSxcbiAgSVRvYXN0Tm90aWZpY2F0aW9uUmVzcG9uc2Vcbn0gZnJvbSAnLi9pbnRlcmZhY2VzJztcbmltcG9ydCB7IFRvYXN0Tm90aWZpY2F0aW9uQ29uZmlnU2VydmljZSB9IGZyb20gJy4vdG9hc3Qtbm90aWZpY2F0aW9uLWNvbmZpZy5zZXJ2aWNlJztcbmltcG9ydCB7IFRvYXN0Tm90aWZpY2F0aW9uU2VydmljZSB9IGZyb20gJy4vdG9hc3Qtbm90aWZpY2F0aW9uLnNlcnZpY2UnO1xuXG4vLyByZWdpb24gKioqIFB1YmxpYyAqKipcbmV4cG9ydCBjbGFzcyBUb2FzdE5vdGlmaWNhdGlvbkluaXRpYWxpemVyIHtcbiAgcHJpdmF0ZSB0b2FzdE5vdGlmaWNhdGlvbkNhcnJpZXI6IFRvYXN0Tm90aWZpY2F0aW9uQ2FycmllciA9IG5ldyBUb2FzdE5vdGlmaWNhdGlvbkNhcnJpZXIoKTtcblxuICBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgb3BlblRvYXN0Tm90aWZpY2F0aW9uJCgpOiBPYnNlcnZhYmxlPElUb2FzdE5vdGlmaWNhdGlvblB1YmxpY1Jlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMudG9hc3ROb3RpZmljYXRpb25DYXJyaWVyLm9wZW5Ub2FzdE5vdGlmaWNhdGlvbiQoKS5waXBlKFxuICAgICAgbWFwKHJlc3AgPT4ge1xuICAgICAgICBjb25zdCBiYXNpY1RvYXN0Tm90aWZpY2F0aW9uUmVzcG9uc2UgPSBuZXcgVG9hc3ROb3RpZmljYXRpb25SZXNwb25zZSgpO1xuICAgICAgICBjb25zdCBkYXRhQ29udHJvbCA9IG5ldyBEYXRhQ29udHJvbCgpO1xuICAgICAgICBkYXRhQ29udHJvbC5jb3B5VmFsdWVzRnJvbShyZXNwLCBiYXNpY1RvYXN0Tm90aWZpY2F0aW9uUmVzcG9uc2UpO1xuICAgICAgICByZXR1cm4gYmFzaWNUb2FzdE5vdGlmaWNhdGlvblJlc3BvbnNlO1xuICAgICAgfSksXG4gICAgICB0YWtlKDEpXG4gICAgKTtcbiAgfVxuXG4gIHNldEJ1dHRvbnMoX0J1dHRvbnM6IElCdXR0b25bXSk6IHZvaWQge1xuICAgIHRoaXMudG9hc3ROb3RpZmljYXRpb25DYXJyaWVyLnNldEJ1dHRvbnMoX0J1dHRvbnMpO1xuICB9XG5cbiAgc2V0Q29uZmlnKF9Ub2FzdE5vdGlmaWNhdGlvbkNvbmZpZzogSVRvYXN0Q29yZUNvbmZpZykge1xuICAgIHRoaXMudG9hc3ROb3RpZmljYXRpb25DYXJyaWVyLnNldENvbmZpZyhfVG9hc3ROb3RpZmljYXRpb25Db25maWcpO1xuICB9XG5cbiAgc2V0RGlzcGF0Y2goX1RpdGxlOiBzdHJpbmcsIF9NZXNzYWdlOiBzdHJpbmcgPSBudWxsKTogdm9pZCB7XG4gICAgdGhpcy50b2FzdE5vdGlmaWNhdGlvbkNhcnJpZXIuc2V0VGl0bGUoX1RpdGxlKTtcbiAgICB0aGlzLnRvYXN0Tm90aWZpY2F0aW9uQ2Fycmllci5zZXRNZXNzYWdlKF9NZXNzYWdlKTtcbiAgfVxuXG4gIHNldFRpdGxlKF9UaXRsZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy50b2FzdE5vdGlmaWNhdGlvbkNhcnJpZXIuc2V0VGl0bGUoX1RpdGxlKTtcbiAgfVxuXG4gIHNldE1lc3NhZ2UoX01lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMudG9hc3ROb3RpZmljYXRpb25DYXJyaWVyLnNldE1lc3NhZ2UoX01lc3NhZ2UpO1xuICB9XG5cbiAgc2V0QnV0dG9uTGFiZWxzKF9Db25maXJtOiBzdHJpbmcsIF9EZWNsaW5lPzogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy50b2FzdE5vdGlmaWNhdGlvbkNhcnJpZXIuc2V0QnV0dG9uTGFiZWxzKF9Db25maXJtLCBfRGVjbGluZSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFRvYXN0Tm90aWZpY2F0aW9uUmVzcG9uc2VcbiAgZXh0ZW5kcyBEYXRhQ29udHJvbFxuICBpbXBsZW1lbnRzIElUb2FzdE5vdGlmaWNhdGlvblJlc3BvbnNlLCBJVG9hc3ROb3RpZmljYXRpb25QdWJsaWNSZXNwb25zZSB7XG4gIC8vIHByaXZhdGUgUmVzcG9uc2U6IERpYWxvZ1ByZXBhcmVSZXNwb25zZSAgICAgICAgICAgID0gbmV3IERpYWxvZ1ByZXBhcmVSZXNwb25zZSgpO1xuXG4gIFN1Y2Nlc3M6IGJvb2xlYW4gPSBudWxsO1xuICBDbGlja2VkQnV0dG9uSUQ6IHN0cmluZyA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIHNldFN1Y2Nlc3MoX0lzU3VjY2VzczogYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMuU3VjY2VzcyA9IF9Jc1N1Y2Nlc3M7XG4gIH1cblxuICBzZXRDbGlja2VkQnV0dG9uSUQoX0NsaWNrZWRCdXR0b25JRCk6IHZvaWQge1xuICAgIHRoaXMuQ2xpY2tlZEJ1dHRvbklEID0gX0NsaWNrZWRCdXR0b25JRDtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgVG9hc3ROb3RpZmljYXRpb25FdmVudHNDb250cm9sbGVyIHtcbiAgZGVmYXVsdFJlc3BvbnNlOiBJUHJpdmF0ZVJlc3BvbnNlTWVyZ2VkO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgX2FmdGVyQ2xvc2VkOiBTdWJqZWN0PElQcml2YXRlUmVzcG9uc2VNZXJnZWQ+ID0gbmV3IFN1YmplY3Q8SVByaXZhdGVSZXNwb25zZU1lcmdlZD4oKTtcbiAgYWZ0ZXJDbG9zZWQkOiBPYnNlcnZhYmxlPElQcml2YXRlUmVzcG9uc2VNZXJnZWQ+ID0gdGhpcy5fYWZ0ZXJDbG9zZWQuYXNPYnNlcnZhYmxlKCk7XG4gIHByaXZhdGUgcmVhZG9ubHkgX29uQnV0dG9uQ2xpY2s6IFN1YmplY3Q8SUJ1dHRvbj4gPSBuZXcgU3ViamVjdDxJQnV0dG9uPigpO1xuICBvbkJ1dHRvbkNsaWNrJDogT2JzZXJ2YWJsZTxJQnV0dG9uPiA9IHRoaXMuX29uQnV0dG9uQ2xpY2suYXNPYnNlcnZhYmxlKCk7XG4gIHByaXZhdGUgcmVhZG9ubHkgX2J1dHRvbkxpc3Q6IFN1YmplY3Q8SUJ1dHRvbltdPiA9IG5ldyBTdWJqZWN0PElCdXR0b25bXT4oKTtcbiAgYnV0dG9uTGlzdCQ6IE9ic2VydmFibGU8SUJ1dHRvbltdPiA9IHRoaXMuX2J1dHRvbkxpc3QuYXNPYnNlcnZhYmxlKCk7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBFbnRpdHlVbmlxdWVJRDogc3RyaW5nKSB7fVxuXG4gIGNsb3NlKF9SZXNwb25zZT86IElQcml2YXRlUmVzcG9uc2VNZXJnZWQpOiB2b2lkIHtcbiAgICBjb25zdCByZXNwb25zZSA9IF9SZXNwb25zZSA/IF9SZXNwb25zZSA6IHRoaXMuZGVmYXVsdFJlc3BvbnNlO1xuICAgIHRoaXMuX2FmdGVyQ2xvc2VkLm5leHQocmVzcG9uc2UpO1xuICB9XG5cbiAgb25CdXR0b25DbGljayhfQnV0dG9uOiBJQnV0dG9uKTogdm9pZCB7XG4gICAgdGhpcy5kZWZhdWx0UmVzcG9uc2Uuc2V0Q2xpY2tlZEJ1dHRvbklEKF9CdXR0b24uSUQpO1xuICAgIHRoaXMuX29uQnV0dG9uQ2xpY2submV4dChfQnV0dG9uKTtcbiAgfVxuXG4gIHNldEJ1dHRvbkxpc3QoX0J1dHRvbkxpc3Q6IElCdXR0b25bXSk6IHZvaWQge1xuICAgIHRoaXMuX2J1dHRvbkxpc3QubmV4dChfQnV0dG9uTGlzdCk7XG4gIH1cblxuICBzZXREZWZhdWx0UmVzcG9uc2UoX1Jlc3BvbnNlOiBJUHJpdmF0ZVJlc3BvbnNlTWVyZ2VkKTogdm9pZCB7XG4gICAgdGhpcy5kZWZhdWx0UmVzcG9uc2UgPSBfUmVzcG9uc2U7XG4gIH1cbn1cblxuLy8gZW5kcmVnaW9uXG5cbmV4cG9ydCBjbGFzcyBUb2FzdE5vdGlmaWNhdGlvbkRlZmF1bHRSZXNwb25zZSBleHRlbmRzIFRvYXN0Tm90aWZpY2F0aW9uUmVzcG9uc2UgaW1wbGVtZW50cyBJUHJpdmF0ZVJlc3BvbnNlTWVyZ2VkIHtcbiAgdG9hc3ROb3RpZmljYXRpb25CZWxvbmdpbmc6IFRvYXN0Tm90aWZpY2F0aW9uQmVsb25naW5nID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgc2V0QmVsb25naW5nKF9Ub2FzdE5vdGlmaWNhdGlvbkJlbG9uZ2luZyk6IHZvaWQge1xuICAgIHRoaXMudG9hc3ROb3RpZmljYXRpb25CZWxvbmdpbmcgPSBfVG9hc3ROb3RpZmljYXRpb25CZWxvbmdpbmc7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFRvYXN0Tm90aWZpY2F0aW9uQ2FycmllciB7XG4gIHRvYXN0Tm90aWZpY2F0aW9uQmVsb25naW5nOiBUb2FzdE5vdGlmaWNhdGlvbkJlbG9uZ2luZyA9IG5ldyBUb2FzdE5vdGlmaWNhdGlvbkJlbG9uZ2luZygpO1xuXG4gIGNvbnN0cnVjdG9yKCkge31cblxuICBzZXRCdXR0b25zKF9CdXR0b25zOiBJQnV0dG9uW10pIHtcbiAgICBpZiAoX0J1dHRvbnMubGVuZ3RoKSB7XG4gICAgICB0aGlzLnRvYXN0Tm90aWZpY2F0aW9uQmVsb25naW5nLkJ1dHRvbnMgPSBfQnV0dG9ucztcbiAgICB9XG4gIH1cblxuICBzZXRUaXRsZShfVGl0bGU6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMudG9hc3ROb3RpZmljYXRpb25CZWxvbmdpbmcuRGlzcGF0Y2guVGl0bGUgPSBfVGl0bGU7XG4gIH1cblxuICBzZXRNZXNzYWdlKF9NZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLnRvYXN0Tm90aWZpY2F0aW9uQmVsb25naW5nLkRpc3BhdGNoLk1lc3NhZ2UgPSBfTWVzc2FnZTtcbiAgfVxuXG4gIHNldEJ1dHRvbkxhYmVscyhfQ29uZmlybTogc3RyaW5nLCBfRGVjbGluZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy50b2FzdE5vdGlmaWNhdGlvbkJlbG9uZ2luZy5Ub2FzdENvcmVDb25maWcuQ29uZmlybUxhYmVsID0gX0NvbmZpcm07XG4gICAgdGhpcy50b2FzdE5vdGlmaWNhdGlvbkJlbG9uZ2luZy5Ub2FzdENvcmVDb25maWcuRGVjbGluZUxhYmVsID0gX0RlY2xpbmU7XG4gIH1cblxuICBzZXRDb25maWcoX1RvYXN0Tm90aWZpY2F0aW9uQmVsb25naW5nOiBJVG9hc3RDb3JlQ29uZmlnKSB7XG4gICAgLy8gcmVnaW9uICoqKiBsb2NhbCBVc2VyQ29uZmlnIChkZWZpbmVkIG9uIHBsYWNlIHdoZXJlIGRpYWxvZyBpcyBjYWxsZWQpICoqKlxuICAgIGNvbnN0IGRhdGFDb250cm9sID0gbmV3IERhdGFDb250cm9sKCk7XG4gICAgZGF0YUNvbnRyb2wuY29weVZhbHVlc0Zyb20oX1RvYXN0Tm90aWZpY2F0aW9uQmVsb25naW5nLCB0aGlzLnRvYXN0Tm90aWZpY2F0aW9uQmVsb25naW5nLlRvYXN0Q29yZUNvbmZpZyk7XG4gICAgLy8gZW5kcmVnaW9uXG4gIH1cblxuICBvcGVuVG9hc3ROb3RpZmljYXRpb24kKCk6IE9ic2VydmFibGU8SVByaXZhdGVSZXNwb25zZU1lcmdlZD4ge1xuICAgIGlmICghdGhpcy50b2FzdE5vdGlmaWNhdGlvbkJlbG9uZ2luZy5EaXNwYXRjaC5UaXRsZSAmJiAhdGhpcy50b2FzdE5vdGlmaWNhdGlvbkJlbG9uZ2luZy5EaXNwYXRjaC5NZXNzYWdlKSB7XG4gICAgICB0aHJvdyBFcnJvcignVG9hc3Qgbm90aWZpY2F0aW9uIGNhbiBub3QgYmUgd2l0aG91dCBib3RoIG1lc3NhZ2UgYW5kIHRpdGxlLicpO1xuICAgIH1cbiAgICBjb25zdCBzZXJ2aWNlOiBUb2FzdE5vdGlmaWNhdGlvblNlcnZpY2UgPSBTZXJ2aWNlTG9jYXRvci5pbmplY3Rvci5nZXQoVG9hc3ROb3RpZmljYXRpb25TZXJ2aWNlKTtcbiAgICByZXR1cm4gc2VydmljZS5vcGVuVG9hc3QkKHRoaXMudG9hc3ROb3RpZmljYXRpb25CZWxvbmdpbmcpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBHbG9iYWxUb2FzdFNldHRpbmdzIGltcGxlbWVudHMgSUdsb2JhbFRvYXN0U2V0dGluZ3Mge1xuICBBbGxvd2VkTm90aWZpY2F0aW9uc0F0T25jZTogbnVtYmVyID0gbnVsbDtcbn1cblxuZXhwb3J0IGNsYXNzIFJlc2V0VG9hc3RHbG9iYWxTZXR0aW5ncyB7XG4gIGNvbnN0cnVjdG9yKGdsb2JhbFRvYXN0Q29uZmlnPzogSUdsb2JhbFRvYXN0U2V0dGluZ3MpIHtcbiAgICBjb25zdCBnbG9iYWxUb2FzdENvbmZpZ1NlcnZpY2U6IFRvYXN0Tm90aWZpY2F0aW9uQ29uZmlnU2VydmljZSA9IFNlcnZpY2VMb2NhdG9yLmluamVjdG9yLmdldChcbiAgICAgIFRvYXN0Tm90aWZpY2F0aW9uQ29uZmlnU2VydmljZVxuICAgICk7XG4gICAgaWYgKGdsb2JhbFRvYXN0Q29uZmlnU2VydmljZSkge1xuICAgICAgZ2xvYmFsVG9hc3RDb25maWdTZXJ2aWNlLnNldFJlc2V0R2xvYmFsVG9hc3RDb25maWcoZ2xvYmFsVG9hc3RDb25maWcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBnbG9iYWxUb2FzdENvbmZpZ1NlcnZpY2Uuc2V0UmVzZXRHbG9iYWxUb2FzdENvbmZpZygpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgVG9hc3RTZXR0aW5ncyB7XG4gIEJ1dHRvbnM6IElCdXR0b25bXSA9IFtdO1xuICBUb2FzdENvcmVDb25maWc6IElUb2FzdENvcmVDb25maWcgPSBuZXcgVG9hc3RDb3JlQ29uZmlnKCk7XG4gIERpc3BhdGNoOiBJRGlzcGF0Y2ggPSBuZXcgRGlzcGF0Y2goKTtcbiAgR2xvYmFsU2V0dGluZ3M6IEdsb2JhbFRvYXN0U2V0dGluZ3MgPSBuZXcgR2xvYmFsVG9hc3RTZXR0aW5ncygpO1xufVxuXG5leHBvcnQgY2xhc3MgVG9hc3RDdXN0b21TdHlsZXMgaW1wbGVtZW50cyBJVG9hc3RDdXN0b21TdHlsZXMge1xuICBUaXRsZUNTUzogc3RyaW5nID0gbnVsbDtcbiAgVGV4dENTUzogc3RyaW5nID0gbnVsbDtcbiAgQnV0dG9uU2VjdGlvbkNTUzogc3RyaW5nID0gbnVsbDtcbiAgQnV0dG9uQ1NTOiBzdHJpbmcgPSBudWxsO1xufVxuXG5leHBvcnQgY2xhc3MgVG9hc3RDb3JlQ29uZmlnIGltcGxlbWVudHMgSVRvYXN0Q29yZUNvbmZpZyB7XG4gIFRvYXN0UG9zaXRpb246IFRvYXN0UG9zaXRpb25FbnVtID0gbnVsbDtcbiAgUHJvZ3Jlc3NCYXI6IFRvYXN0UHJvZ3Jlc3NCYXJFbnVtID0gbnVsbDtcbiAgVG9hc3RVc2VyVmlld1R5cGU6IFRvYXN0VXNlclZpZXdUeXBlRW51bSA9IG51bGw7XG4gIE9wZW5JbkVsZW1lbnRJRDogc3RyaW5nID0gbnVsbDtcbiAgQnV0dG9uUG9zaXRpb246IFZlcnRpY2FsUG9zaXRpb24gPSBudWxsO1xuICBUZXh0UG9zaXRpb246IFZlcnRpY2FsUG9zaXRpb24gPSBudWxsO1xuICBMYXlvdXRUeXBlOiBEaWFsb2dMYXlvdXREaXNwbGF5ID0gbnVsbDtcbiAgRGlzcGF0Y2g6IElEaXNwYXRjaCA9IG51bGw7XG4gIENvbmZpcm1MYWJlbDogc3RyaW5nID0gbnVsbDtcbiAgRGVjbGluZUxhYmVsOiBzdHJpbmcgPSBudWxsO1xuICBBdXRvQ2xvc2VEZWxheTogbnVtYmVyID0gbnVsbDtcbiAgRGlzYWJsZUljb246IGJvb2xlYW4gPSBudWxsO1xuICBBbGxvd0hUTUxNZXNzYWdlOiBib29sZWFuID0gbnVsbDtcbiAgQW5pbWF0aW9uSW46IEFwcGVhcmFuY2VBbmltYXRpb24gPSBudWxsO1xuICBBbmltYXRpb25PdXQ6IERpc2FwcGVhcmFuY2VBbmltYXRpb24gPSBudWxsO1xuICBDdXN0b21TdHlsZXM6IElUb2FzdEN1c3RvbVN0eWxlcyA9IG5ldyBUb2FzdEN1c3RvbVN0eWxlcygpO1xufVxuXG5leHBvcnQgY2xhc3MgVG9hc3ROb3RpZmljYXRpb25CZWxvbmdpbmcgZXh0ZW5kcyBUb2FzdFNldHRpbmdzIGltcGxlbWVudHMgSVRvYXN0Tm90aWZpY2F0aW9uQmVsb25naW5nIHtcbiAgRW50aXR5VW5pcXVlSUQ6IHN0cmluZyA9ICdUJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KTtcbiAgRXZlbnRzQ29udHJvbGxlcjogVG9hc3ROb3RpZmljYXRpb25FdmVudHNDb250cm9sbGVyO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5FdmVudHNDb250cm9sbGVyID0gbmV3IFRvYXN0Tm90aWZpY2F0aW9uRXZlbnRzQ29udHJvbGxlcih0aGlzLkVudGl0eVVuaXF1ZUlEKTtcbiAgICBjb25zdCB0b2FzdE5vdGlmaWNhdGlvbkNvbmZpZ3VyYXRvcjogVG9hc3ROb3RpZmljYXRpb25Db25maWdTZXJ2aWNlID0gU2VydmljZUxvY2F0b3IuaW5qZWN0b3IuZ2V0KFxuICAgICAgVG9hc3ROb3RpZmljYXRpb25Db25maWdTZXJ2aWNlXG4gICAgKTtcbiAgICBjb25zdCBiYXNlU2V0dGluZ3MgPSBuZXcgVG9hc3RTZXR0aW5ncygpO1xuICAgIGNvbnN0IGRhdGFDb250cm9sID0gbmV3IERhdGFDb250cm9sKCk7XG4gICAgZGF0YUNvbnRyb2wuY29weVZhbHVlc0Zyb20oXG4gICAgICB0b2FzdE5vdGlmaWNhdGlvbkNvbmZpZ3VyYXRvci5wcm9kdWN0aW9uQ29uZmlnLlRvYXN0Q29yZUNvbmZpZyxcbiAgICAgIGJhc2VTZXR0aW5ncy5Ub2FzdENvcmVDb25maWdcbiAgICApO1xuICAgIHRoaXMuVG9hc3RDb3JlQ29uZmlnID0gYmFzZVNldHRpbmdzLlRvYXN0Q29yZUNvbmZpZztcbiAgICB0aGlzLkJ1dHRvbnMgPSB0b2FzdE5vdGlmaWNhdGlvbkNvbmZpZ3VyYXRvci5wcm9kdWN0aW9uQ29uZmlnLkJ1dHRvbnMuc2xpY2UoKTtcbiAgfVxufVxuIl19